<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Frosted Glass</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
      transition: background-image 1s ease-in-out;
    }

    /* Animated background elements */
    .bg-element {
      display: none;
    }

    /* Liquid glass container - lighter shadows */
    .glass-container {
      position: relative;
      /* Dimensions set dynamically by JavaScript */
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(60px) saturate(180%);
      -webkit-backdrop-filter: blur(60px) saturate(180%);
      /* Border radius set dynamically by JavaScript */
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 
        0 4px 16px rgba(0, 0, 0, 0.15),
        inset 0 1px 1px rgba(255, 255, 255, 0.4),
        inset 0 -1px 1px rgba(0, 0, 0, 0.1);
      padding: 24px 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: move;
      transition: background 0.1s ease, border 0.1s ease;
      overflow: visible;
    }

    /* Real magnifying lens effect - lighter */
    .glass-container::before {
      content: '';
      position: absolute;
      top: -40px;
      left: -40px;
      right: -40px;
      bottom: -40px;
      background: inherit;
      backdrop-filter: blur(30px) saturate(150%) brightness(1.15);
      -webkit-backdrop-filter: blur(30px) saturate(150%) brightness(1.15);
      border-radius: 72px;
      pointer-events: none;
      z-index: -1;
      opacity: 0.5;
      box-shadow: 
        inset 0 0 30px rgba(255, 255, 255, 0.08),
        0 0 40px rgba(255, 255, 255, 0.05);
    }

    /* Lighter bottom shadow */
    .glass-container::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 20%;
      right: 20%;
      height: 30px;
      background: radial-gradient(
        ellipse at center,
        rgba(0, 0, 0, 0.15) 0%,
        rgba(0, 0, 0, 0.08) 50%,
        transparent 100%
      );
      border-radius: 50%;
      pointer-events: none;
      filter: blur(8px);
      z-index: -2;
    }

    .content {
      position: relative;
      z-index: 1;
      text-align: center;
      color: white;
    }

    .content h1 {
      font-size: 28px;
      font-weight: 300;
      margin-bottom: 8px;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      letter-spacing: -0.5px;
    }

    .content p {
      font-size: 14px;
      opacity: 0.9;
      font-weight: 400;
      text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
    }

    /* Close button */
    .close-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      color: white;
      font-size: 18px;
      font-weight: 300;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    /* Control panel on the right */
    .control-panel {
      position: fixed;
      top: 50%;
      right: 20px;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 24px;
      width: 280px;
      color: white;
      font-size: 13px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 1000;
    }

    .control-panel h3 {
      margin: 0 0 20px 0;
      font-size: 16px;
      font-weight: 500;
      text-align: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      padding-bottom: 12px;
    }

    .control-group {
      margin-bottom: 20px;
    }

    .control-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.9);
    }

    .control-group .value {
      float: right;
      color: #60a5fa;
      font-weight: 600;
    }

    .control-group input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.2);
      outline: none;
      -webkit-appearance: none;
      appearance: none;
    }

    .control-group input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #60a5fa;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(96, 165, 250, 0.5);
    }

    .control-group input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #60a5fa;
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 8px rgba(96, 165, 250, 0.5);
    }

    .control-group input[type="range"]:hover::-webkit-slider-thumb {
      background: #3b82f6;
      transform: scale(1.1);
    }

    .control-group input[type="range"]:hover::-moz-range-thumb {
      background: #3b82f6;
      transform: scale(1.1);
    }

    .reset-btn {
      width: 100%;
      padding: 10px;
      background: rgba(96, 165, 250, 0.2);
      border: 1px solid rgba(96, 165, 250, 0.4);
      border-radius: 8px;
      color: white;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 8px;
    }

    .reset-btn:hover {
      background: rgba(96, 165, 250, 0.3);
      border-color: rgba(96, 165, 250, 0.6);
    }

    /* Cursor following light */
    .cursor-light {
      position: fixed;
      pointer-events: none;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
      filter: blur(30px);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 999;
      mix-blend-mode: screen;
    }

    /* Jelly animation */
    @keyframes jelly-wobble {
      0%, 100% { transform: scale(1, 1); }
      25% { transform: scale(1.05, 0.95); }
      50% { transform: scale(0.95, 1.05); }
      75% { transform: scale(1.02, 0.98); }
    }

    .jelly-active {
      animation: jelly-wobble 0.6s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="bg-element"></div>
  <div class="cursor-light" id="cursorLight"></div>

  <div class="control-panel">
    <h3>Glass Controls</h3>
    
    <div class="control-group">
      <label>
        Transparency
        <span class="value" id="transparencyValue">6%</span>
      </label>
      <input type="range" id="transparency" min="0" max="30" value="6" step="1">
    </div>

    <div class="control-group">
      <label>
        Blur Amount
        <span class="value" id="blurValue">60px</span>
      </label>
      <input type="range" id="blur" min="10" max="150" value="60" step="5">
    </div>

    <div class="control-group">
      <label>
        Magnifying Blur
        <span class="value" id="magBlurValue">30px</span>
      </label>
      <input type="range" id="magBlur" min="10" max="80" value="30" step="5">
    </div>

    <div class="control-group">
      <label>
        Magnifying Brightness
        <span class="value" id="magBrightnessValue">115%</span>
      </label>
      <input type="range" id="magBrightness" min="100" max="150" value="115" step="5">
    </div>

    <div class="control-group">
      <label>
        Lens Size
        <span class="value" id="lensSizeValue">40px</span>
      </label>
      <input type="range" id="lensSize" min="20" max="80" value="40" step="5">
    </div>

    <div class="control-group">
      <label>
        Border Radius
        <span class="value" id="radiusValue">32px</span>
      </label>
      <input type="range" id="radius" min="8" max="60" value="32" step="4">
    </div>

    <div class="control-group">
      <label>
        Jelly Elasticity
        <span class="value" id="jellyValue">60%</span>
      </label>
      <input type="range" id="jelly" min="0" max="100" value="60" step="5">
    </div>

    <div class="control-group">
      <label>
        Magnetic Strength
        <span class="value" id="magneticValue">30%</span>
      </label>
      <input type="range" id="magnetic" min="0" max="100" value="30" step="5">
    </div>

    <button class="reset-btn" onclick="resetControls()">Reset to Default</button>
    <button class="reset-btn" onclick="exportConfig()">Export JSON</button>
    <button class="reset-btn" onclick="importConfig()">Import JSON</button>
  </div>
  <div class="bg-element" style="right: -72px; bottom: 96px;"></div>
  <div class="bg-element"></div>

  <div class="glass-container" id="glassContainer">
    <button class="close-btn" onclick="window.close()">×</button>
    <div class="content">
      <h1>Magnifying Liquid Glass</h1>
      <p>Real lens magnification • Beautiful backgrounds • Light shadows</p>
    </div>
  </div>

  <script src="smonthl-api.js"></script>
  <script>
    // Initialize Smonthl API
    const smonthlAPI = new SmonthlAPI();
    let config = null;

    // Load configuration
    smonthlAPI.loadConfig('./config-circle-80.json').then(cfg => {
      config = cfg;
      applyConfig(config);
    });

    // Random beautiful background images
    const backgrounds = [
      'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&q=80', // Mountain landscape
      'https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1920&q=80', // Mountain peak
      'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=1920&q=80', // Forest path
      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=1920&q=80', // Nature landscape
      'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=1920&q=80', // Foggy nature
      'https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=1920&q=80', // Mountain sunset
      'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=1920&q=80', // Tropical beach
      'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&q=80', // Beach sunset
      'https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?w=1920&q=80', // Ocean waves
      'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=1920&q=80', // Mountain lake
      'https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=1920&q=80', // Forest trees
      'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=1920&q=80', // Ocean view
      'https://images.unsplash.com/photo-1511884642898-4c92249e20b6?w=1920&q=80', // Waterfall
      'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&q=80', // Snow mountains
      'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?w=1920&q=80'  // Flower field
    ];

    // Set random background on load
    function setRandomBackground() {
      const randomIndex = Math.floor(Math.random() * backgrounds.length);
      document.body.style.backgroundImage = `url('${backgrounds[randomIndex]}')`;
    }

    setRandomBackground();

    // Change background every 10 seconds
    setInterval(setRandomBackground, 10000);

    // Draggable functionality with jelly physics
    const container = document.getElementById('glassContainer');
    const cursorLight = document.getElementById('cursorLight');
    let isDragging = false;
    let currentX = 0;
    let currentY = 0;
    let targetX = 0;
    let targetY = 0;
    let velocityX = 0;
    let velocityY = 0;
    let initialX;
    let initialY;
    let jellyElasticity = 0.6;
    let jellyFriction = 0.85;
    let magneticStrength = 0.3;
    let magneticRange = 150;

    // Cursor following light
    let mouseX = 0;
    let mouseY = 0;
    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      
      // Update cursor light position
      const rect = container.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const distance = Math.sqrt(Math.pow(mouseX - centerX, 2) + Math.pow(mouseY - centerY, 2));
      
      if (distance < 200) {
        cursorLight.style.opacity = (1 - distance / 200) * 0.8;
        cursorLight.style.left = (mouseX - 60) + 'px';
        cursorLight.style.top = (mouseY - 60) + 'px';
      } else {
        cursorLight.style.opacity = 0;
      }
      
      // Magnetic attraction when near
      if (!isDragging && distance < magneticRange) {
        const angle = Math.atan2(mouseY - centerY, mouseX - centerX);
        const pullX = Math.cos(angle) * magneticStrength * (1 - distance / magneticRange) * 5;
        const pullY = Math.sin(angle) * magneticStrength * (1 - distance / magneticRange) * 5;
        targetX += pullX;
        targetY += pullY;
      }
    });

    container.addEventListener('mousedown', (e) => {
      if (e.target.classList.contains('close-btn')) return;
      isDragging = true;
      initialX = e.clientX - currentX;
      initialY = e.clientY - currentY;
      container.classList.add('jelly-active');
    });

    document.addEventListener('mousemove', (e) => {
      if (isDragging) {
        e.preventDefault();
        targetX = e.clientX - initialX;
        targetY = e.clientY - initialY;
      }
    });

    document.addEventListener('mouseup', () => {
      if (isDragging) {
        isDragging = false;
        setTimeout(() => container.classList.remove('jelly-active'), 600);
      }
    });

    // Jelly physics animation loop
    function jellyPhysics() {
      // Apply elastic movement
      velocityX += (targetX - currentX) * jellyElasticity;
      velocityY += (targetY - currentY) * jellyElasticity;
      
      // Apply friction
      velocityX *= jellyFriction;
      velocityY *= jellyFriction;
      
      // Update position
      currentX += velocityX;
      currentY += velocityY;
      
      // Apply transform with slight rotation for jelly effect
      const rotation = velocityX * 0.02;
      const scaleX = 1 + Math.abs(velocityX) * 0.001;
      const scaleY = 1 + Math.abs(velocityY) * 0.001;
      
      container.style.transform = `translate(${currentX}px, ${currentY}px) rotate(${rotation}deg) scale(${scaleX}, ${scaleY})`;
      
      requestAnimationFrame(jellyPhysics);
    }
    jellyPhysics();

    // Control panel functionality
    const glassContainer = document.getElementById('glassContainer');
    const transparency = document.getElementById('transparency');
    const blur = document.getElementById('blur');
    const magBlur = document.getElementById('magBlur');
    const magBrightness = document.getElementById('magBrightness');
    const lensSize = document.getElementById('lensSize');
    const radius = document.getElementById('radius');

    // Update transparency
    transparency.addEventListener('input', (e) => {
      const value = e.target.value;
      document.getElementById('transparencyValue').textContent = value + '%';
      glassContainer.style.background = `rgba(255, 255, 255, ${value / 100})`;
    });

    // Update blur
    blur.addEventListener('input', (e) => {
      const value = e.target.value;
      document.getElementById('blurValue').textContent = value + 'px';
      glassContainer.style.backdropFilter = `blur(${value}px) saturate(180%)`;
      glassContainer.style.webkitBackdropFilter = `blur(${value}px) saturate(180%)`;
    });

    // Update magnifying blur
    magBlur.addEventListener('input', (e) => {
      const value = e.target.value;
      const brightness = magBrightness.value;
      document.getElementById('magBlurValue').textContent = value + 'px';
      updateMagnifyingLens(value, brightness);
    });

    // Update magnifying brightness
    magBrightness.addEventListener('input', (e) => {
      const value = e.target.value;
      const blurVal = magBlur.value;
      document.getElementById('magBrightnessValue').textContent = value + '%';
      updateMagnifyingLens(blurVal, value);
    });

    function updateMagnifyingLens(blurVal, brightness) {
      const style = document.createElement('style');
      style.id = 'dynamic-lens-style';
      const existingStyle = document.getElementById('dynamic-lens-style');
      if (existingStyle) existingStyle.remove();
      
      style.textContent = `
        .glass-container::before {
          backdrop-filter: blur(${blurVal}px) saturate(150%) brightness(${brightness / 100}) !important;
          -webkit-backdrop-filter: blur(${blurVal}px) saturate(150%) brightness(${brightness / 100}) !important;
        }
      `;
      document.head.appendChild(style);
    }

    // Update lens size
    lensSize.addEventListener('input', (e) => {
      const value = e.target.value;
      document.getElementById('lensSizeValue').textContent = value + 'px';
      const style = document.createElement('style');
      style.id = 'dynamic-lens-size';
      const existingStyle = document.getElementById('dynamic-lens-size');
      if (existingStyle) existingStyle.remove();
      
      const newRadius = parseInt(radius.value) + parseInt(value);
      style.textContent = `
        .glass-container::before {
          top: -${value}px !important;
          left: -${value}px !important;
          right: -${value}px !important;
          bottom: -${value}px !important;
          border-radius: ${newRadius}px !important;
        }
      `;
      document.head.appendChild(style);
    });

    // Update border radius
    radius.addEventListener('input', (e) => {
      const value = e.target.value;
      document.getElementById('radiusValue').textContent = value + 'px';
      glassContainer.style.borderRadius = value + 'px';
      if (config) smonthlAPI.updateConfig('glass.borderRadius', parseInt(value));
    });

    // Update jelly elasticity
    const jelly = document.getElementById('jelly');
    jelly.addEventListener('input', (e) => {
      const value = e.target.value;
      document.getElementById('jellyValue').textContent = value + '%';
      jellyElasticity = value / 100;
      if (config) smonthlAPI.updateConfig('jelly.elasticity', jellyElasticity);
    });

    // Update magnetic strength
    const magnetic = document.getElementById('magnetic');
    magnetic.addEventListener('input', (e) => {
      const value = e.target.value;
      document.getElementById('magneticValue').textContent = value + '%';
      magneticStrength = value / 100;
      if (config) smonthlAPI.updateConfig('jelly.magneticStrength', magneticStrength);
    });

    // Apply configuration
    function applyConfig(cfg) {
      // Apply glass dimensions
      if (cfg.glass.width) {
        container.style.width = cfg.glass.width + 'px';
      }
      if (cfg.glass.height) {
        container.style.height = cfg.glass.height + 'px';
      }
      if (cfg.glass.borderRadius) {
        container.style.borderRadius = cfg.glass.borderRadius + 'px';
      }
      
      // Apply content
      const contentDiv = container.querySelector('.content');
      if (cfg.content) {
        if (cfg.content.type === 'icon' && cfg.content.icon) {
          contentDiv.innerHTML = `<div style="font-size: ${Math.min(cfg.glass.width, cfg.glass.height) * 0.4}px;">${cfg.content.icon}</div>`;
        } else if (cfg.content.type === 'text') {
          contentDiv.innerHTML = `
            ${cfg.content.title ? `<h1>${cfg.content.title}</h1>` : ''}
            ${cfg.content.subtitle ? `<p>${cfg.content.subtitle}</p>` : ''}
          `;
        }
      }
      
      transparency.value = cfg.glass.transparency;
      blur.value = cfg.glass.blur;
      magBlur.value = cfg.glass.magnifyingBlur;
      magBrightness.value = cfg.glass.magnifyingBrightness;
      lensSize.value = cfg.glass.lensSize;
      radius.value = cfg.glass.borderRadius;
      jelly.value = cfg.jelly.elasticity * 100;
      magnetic.value = cfg.jelly.magneticStrength * 100;
      
      jellyElasticity = cfg.jelly.elasticity;
      jellyFriction = cfg.jelly.friction;
      magneticStrength = cfg.jelly.magneticStrength;
      magneticRange = cfg.jelly.magneticRange;
      
      // Trigger updates
      transparency.dispatchEvent(new Event('input'));
      blur.dispatchEvent(new Event('input'));
      magBlur.dispatchEvent(new Event('input'));
      magBrightness.dispatchEvent(new Event('input'));
      lensSize.dispatchEvent(new Event('input'));
      radius.dispatchEvent(new Event('input'));
    }

    // Export configuration
    function exportConfig() {
      const json = smonthlAPI.exportConfig();
      const blob = new Blob([json], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'glass-config.json';
      a.click();
      URL.revokeObjectURL(url);
    }

    // Import configuration
    function importConfig() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'application/json';
      input.onchange = (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (event) => {
          if (smonthlAPI.importConfig(event.target.result)) {
            config = smonthlAPI.config;
            applyConfig(config);
            alert('Configuration imported successfully!');
          } else {
            alert('Failed to import configuration');
          }
        };
        reader.readAsText(file);
      };
      input.click();
    }

    window.exportConfig = exportConfig;
    window.importConfig = importConfig;

    // Reset function
    function resetControls() {
      transparency.value = 6;
      blur.value = 60;
      magBlur.value = 30;
      magBrightness.value = 115;
      lensSize.value = 40;
      radius.value = 32;
      
      document.getElementById('transparencyValue').textContent = '6%';
      document.getElementById('blurValue').textContent = '60px';
      document.getElementById('magBlurValue').textContent = '30px';
      document.getElementById('magBrightnessValue').textContent = '115%';
      document.getElementById('lensSizeValue').textContent = '40px';
      document.getElementById('radiusValue').textContent = '32px';
      
      glassContainer.style.background = 'rgba(255, 255, 255, 0.06)';
      glassContainer.style.backdropFilter = 'blur(60px) saturate(180%)';
      glassContainer.style.webkitBackdropFilter = 'blur(60px) saturate(180%)';
      glassContainer.style.borderRadius = '32px';
      
      const dynamicStyles = document.querySelectorAll('#dynamic-lens-style, #dynamic-lens-size');
      dynamicStyles.forEach(style => style.remove());
    }
    window.resetControls = resetControls;
  </script>
</body>
</html>
